function shapes_grid(e,t,n,r){return this.max_diameter=t,this.rows=r,this.columns=n,this.shape_colors=["#C00","#0C0","#00C"],this.shadow_color="#999",this.letter_color="#FFF",this.letters=[],this.spacing=t*1.2,this.side_counts=[1,3,4,5,6],this.shapes=[],this.shrinking_shapes=[],this.growing_shapes=[],this.step=0,this.speed=1,this.font="Courier",this.change_ratio=function(){return 2*this.max_diameter/((this.columns-1)*(this.rows-1)*this.speed)},this.interval=function(){return this.change_ratio()>=1?2*Math.ceil(this.change_ratio()):2},this.letter_for=function(e,t){letter_obj=this.letters.filter(function(n){return n.c==e&&n.r==t})[0];if(letter_obj!=undefined)return letter_obj.letter},this.init=function(){for(var e=1;e<=this.columns;e++)for(var t=1;t<=this.rows;t++)this.shapes.push(new grid_shape(this,e,t,0,this.side_counts.sample(),this.shape_colors.sample(),this.letter_for(e,t)))},this.full_shapes=function(){return this.shapes.filter(function(e){return e.diameter==t})},this.zero_shapes=function(){return this.shapes.filter(function(e){return e.diameter==0})},this.zero_shrinking_shapes=function(){return this.shrinking_shapes.filter(function(e){return e.diameter==0})},this.full_growing_shapes=function(){return this.growing_shapes.filter(function(e){return e.diameter>=t})},this.add_shrinking_shape=function(){new_shrinker=this.full_shapes().sample(),new_shrinker!=undefined&&this.shrinking_shapes.push(new_shrinker)},this.remove_zero_shrinking_shapes=function(){for(i=0;i<this.zero_shrinking_shapes().length;i++)this.shrinking_shapes.remove(this.zero_shrinking_shapes()[i])},this.add_growing_shape=function(){new_grower=this.zero_shapes().sample(),new_grower!=undefined&&this.growing_shapes.push(new_grower)},this.grow_shapes=function(){for(i=0;i<this.growing_shapes.length;i++)this.growing_shapes[i].diameter+=this.speed},this.shrink_shapes=function(){for(i=0;i<this.shrinking_shapes.length;i++)this.shrinking_shapes[i].diameter-=this.speed},this.remove_full_growing_shapes=function(){for(i=0;i<this.full_growing_shapes().length;i++)this.growing_shapes.remove(this.full_growing_shapes()[i])},this.reset_zero_shapes=function(){for(i=0;i<this.zero_shapes().length;i++)this.zero_shapes()[i].sides=this.side_counts.sample(),this.zero_shapes()[i].color=this.shape_colors.sample()},this.increment=function(){++this.step,this.remove_zero_shrinking_shapes(),this.remove_full_growing_shapes(),this.step%this.interval()==0&&this.add_shrinking_shape(),this.reset_zero_shapes(),this.add_growing_shape(),this.shrink_shapes(),this.grow_shapes()},this.clear=function(){e.clearRect(0,0,e.canvas.width,e.canvas.height)},this.draw=function(){for(var e=0;e<this.shapes.length;e++)this.shapes[e].draw()},this}function animate(){reqAnimFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,reqAnimFrame(animate);for(i=0;i<animations.length;i++)animation=animations[i],animation.increment(),animation.clear(),animation.draw()}function grid_shape(e,t,n,r,i,s,o){this.grid=e,this.column=t,this.row=n,this.diameter=r,this.sides=i,this.color=s,this.letter=o,this.radius=function(){return this.diameter/2},this.x=function(){return(this.column-.5)*this.grid.spacing},this.y=function(){return(this.row-.5)*this.grid.spacing},this.angle=function(){switch(this.sides){case 3:return 1.5*Math.PI;case 4:return.25*Math.PI;case 5:return.5*Math.PI;case 8:return.125*Math.PI;default:return 0}},this.draw=function(){context.save(),context.beginPath();if(this.sides==1)context.arc(this.x(),this.y(),this.radius(),0,2*Math.PI,!1);else{context.moveTo(this.x()+this.radius()*Math.cos(this.angle()),this.y()+this.radius()*Math.sin(this.angle()));for(var e=1;e<=this.sides;e++)context.lineTo(this.x()+this.radius()*Math.cos(this.angle()+e*2*Math.PI/this.sides),this.y()+this.radius()*Math.sin(this.angle()+e*2*Math.PI/this.sides))}context.closePath(),context.shadowBlur=this.diameter/4,context.shadowOffsetX=this.diameter/8,context.shadowOffsetY=this.diameter/8,context.shadowColor=this.grid.shadow_color,context.fillStyle=this.color,context.fill(),context.restore(),this.letter!=undefined&&(context.font="".concat(this.diameter*.5).concat("px ").concat(this.grid.font),context.textAlign="center",context.textBaseline="middle",context.fillStyle=this.grid.letter_color,context.fillText(this.letter,this.x(),this.y()))}}(function(e,t,n,r,i,s,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,s=t.createElement(n),o=t.getElementsByTagName(n)[0],s.async=1,s.src=r,o.parentNode.insertBefore(s,o)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-38264259-1","joshwlewis.com"),ga("send","pageview");var animations=[];Array.prototype.sample=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.remove=function(){var e,t=arguments,n=t.length,r;while(n&&this.length){e=t[--n];while((r=this.indexOf(e))!==-1)this.splice(r,1)}return this},Quad=function(e,t,n,r){this.container=e,this.color=t,this.opacity=0,this.growth=.005,this.setPoints=function(){var e=[[0,0],[1,0],[1,1],[0,1]],t=Math.floor(Math.random()*4),n=t+1;n===4&&(n=0);var r=n%2===0?0:1;e[t][r]=Math.random(),e[n][r]=Math.random(),this.points=e},this.createCanvas=function(e,t){this.canvas=$("<canvas>").prop({height:e,width:t}).css({opacity:this.opacity}).addClass("quad"),this.container.prepend(this.canvas)},this.getX=function(e){return Math.round(this.points[e][0]*this.canvas[0].width)},this.getY=function(e){return Math.round(this.points[e][1]*this.canvas[0].height)},this.draw=function(){var e=this.canvas[0].getContext("2d");e.fillStyle=this.color,e.beginPath(),e.moveTo(this.getX(0),this.getY(0));for(i=3;i>=0;i--)e.lineTo(this.getX(i),this.getY(i));e.closePath(),e.fill()},this.increment=function(){this.opacity=this.opacity+this.growth,this.canvas.css({opacity:this.opacity}),this.opacity>=1&&(this.growth=-this.growth)},this.setDims=function(e,t){if(e!==this.canvas[0].height||t!==this.canvas[0].width)this.canvas[0].width=t,this.canvas[0].height=e,this.draw()},this.destroy=function(){this.canvas.remove()},this.setPoints(),this.createCanvas(n,r),this.draw()},Quadromper=function(e,t){this.container=e,this.colors=t,this.quads=[],this.step=0,this.pixelRatio=window.devicePixelRatio||1,this.getHeight=function(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0);return e*this.pixelRatio},this.getWidth=function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);return e*this.pixelRatio},this.randomColor=function(){return this.colors[Math.floor(Math.random()*this.colors.length)]},this.buildQuad=function(){var e=new Quad(this.container,this.randomColor(),this.getHeight(),this.getWidth());return this.quads.push(e),e},this.animate=function(){this.step%60===0&&this.buildQuad();if(this.step%120===0){var e=this.getHeight(),t=this.getWidth();this.quads.forEach(function(n){n.setDims(e,t)})}this.step%2===0&&this.quads.forEach(function(e){e.increment()}),this.quads[0].opacity<=0&&(this.quads[0].destroy(),this.quads.shift()),window.requestAnimationFrame(this.animate.bind(this)),this.step=this.step+1}},function(){$(function(){var e,t;return t=$("#background"),e=["#29B6F6","#039BE5","#0277BD","#F4511E","#D84315"],window.quadromper=new Quadromper(t,e),window.quadromper.animate()})}.call(this);