<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<title>Exploring Ruby's Enumerable and Comparable | Josh W Lewis</title>
<meta content="Exploring Ruby's Enumerable and Comparable with something that resembles a game with Memphis Ruby. | Josh W Lewis: Ruby Developer and JavaScript Engineer" name='description'>
<meta content='width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
<meta content='Josh W Lewis' name='author'>
<link href="../../stylesheets/slides-156e4619.css" media="screen" rel="stylesheet" type="text/css" />
</head>
<body class='impress-not-supported'>
<div class='fallback-message'><h3>Your browser doesn&rsquo;t support the features needed to display this presentation.</h3>

<p>A simplified version of this presentation follows.</p>

<p>For the best experience, please use one of the following browsers:</p>

<ul>
<li><a href="//www.google.com/chrome">Chrome</a></li>
<li><a href="//www.apple.com/safari">Safari</a></li>
<li><a href="//www.mozilla.org/firefox">Firefox</a></li>
</ul>
</div>
<div id='impress'>
<div id="title" class="step" data-y="-1500"><h1>Exploring Ruby's Enumerable and Comparable</h1>
<br>
<h4>Josh W Lewis</h4>
<p>
<a href='http://joshwlewis.com'>joshwlewis.com</a>
 - 
<a href='//twitter.com'>@joshwlewis</a>
</p>
<br>
<h4>Memphis Ruby Users Group</h4>
<date>4/15/2013</date>
</div><div id="enumerable" class="step" data-rotate-x="90"><h3>What is Enumerable?</h3>
<pre class="highlight ruby"><span class="p">{</span><span class="ss">foo: </span><span class="n">bar</span><span class="p">}</span><span class="nf">.is_a?</span><span class="p">(</span><span class="no">Enumerable</span><span class="p">)</span>              <span class="c1"># =&gt; true</span>
<span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="o">]</span><span class="nf">.is_a?</span><span class="p">(</span><span class="no">Enumerable</span><span class="p">)</span>          <span class="c1"># =&gt; true</span>
<span class="no">Set</span><span class="nf">.new</span><span class="p">(</span><span class="o">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="o">]</span><span class="p">)</span><span class="nf">.is_a?</span><span class="p">(</span><span class="no">Enumerable</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
</pre>
<p>
Enumerable is designed to work with collection type objects. It's
methods provide traversal and searching of members.
</p>
</div><div id="methods" class="step" data-z="-1810"><h3>Enumerable is Loaded with Methods</h3>
<pre class="highlight ruby"><span class="no">Enumerable</span><span class="nf">.instance_methods</span>
<span class="c1"># =&gt; [:to_a, :entries, :sort, :sort_by, :grep, :count, :find, :detect, :find_index, :find_all, :select, :reject, :collect, :map, :flat_map, :collect_concat, :inject, :reduce, :partition, :group_by, :first, :all?, :any?, :one?, :none?, :min, :max, :minmax, :min_by, :max_by, :minmax_by, :member?, :include?, :each_with_index, :reverse_each, :each_entry, :each_slice, :each_cons, :each_with_object, :zip, :take, :take_while, :drop, :drop_while, :cycle, :chunk, :slice_before, :lazy, :to_set]</span>
</pre>
<p>We'll cover some of these...</p>
</div><div id="each" class="step" data-x="1280" data-z="-1280" data-rotate-y="-45"><h3>Enumerable Methods Rely on #each</h3>
<pre class="highlight ruby"><span class="o">[</span><span class="s1">&#39;Joffrey&#39;</span><span class="p">,</span><span class="s1">&#39;Robb&#39;</span><span class="p">,</span><span class="s1">&#39;Stannis&#39;</span><span class="p">,</span><span class="s1">&#39;Renly&#39;</span><span class="p">,</span><span class="s1">&#39;Balon&#39;</span><span class="o">]</span><span class="nf">.each</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="nb">name</span>
<span class="k">end</span>

<span class="c1"># Joffrey</span>
<span class="c1"># Rob</span>
<span class="c1"># Stannis</span>
<span class="c1"># Renly</span>
<span class="c1"># King Balon</span>
</pre>
<p>
<div id='each'>takes a block with an item as an argument. The implementation must be provided by class.</div>
</p>
</div><div id="select" class="step" data-x="1810" data-z="0" data-rotate-y="-90"><h3>Enumerable#select</h3>
<pre class="highlight ruby"><span class="o">[-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="o">]</span><span class="nf">.select</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>
<span class="c1"># =&gt; [1,2,3,4]</span>

<span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="o">]</span><span class="nf">.select</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span><span class="nf">.even?</span> <span class="p">}</span>
<span class="c1"># =&gt; [2,4]</span>
</pre>
<p>#select builds a new array of items that match selection criteria.</p>
</div><div id="find" class="step" data-x="1280" data-z="1280" data-rotate-y="-135"><h3>Enumerable#find</h3>
<pre class="highlight ruby"><span class="o">[</span><span class="s1">&#39;hay&#39;</span><span class="p">,</span><span class="s1">&#39;straw&#39;</span><span class="p">,</span><span class="s1">&#39;needle&#39;</span><span class="p">,</span><span class="s1">&#39;grass&#39;</span><span class="o">]</span><span class="nf">.find</span> <span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span> <span class="o">==</span> <span class="s1">&#39;needle&#39;</span> <span class="p">}</span>
<span class="c1"># =&gt; &#39;needle&#39;</span>

<span class="o">[</span><span class="s1">&#39;one&#39;</span><span class="p">,</span><span class="s1">&#39;two&#39;</span><span class="p">,</span><span class="s1">&#39;three&#39;</span><span class="o">]</span><span class="nf">.find</span><span class="p">{</span> <span class="o">|</span><span class="n">i</span><span class="o">|</span> <span class="n">i</span><span class="nf">.count</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="p">}</span>
<span class="c1"># =&gt; &#39;three&#39;</span>
</pre>
<p>#find returns the first item that matches the selection criteria</p>
</div><div id="map" class="step" data-x="0" data-z="1810" data-rotate-y="-180"><h3>Enumerable#map (or #collect)</h3>
<pre class="highlight ruby"><span class="o">[</span><span class="s1">&#39;Joffrey&#39;</span><span class="p">,</span><span class="s1">&#39;Robb&#39;</span><span class="p">,</span><span class="s1">&#39;Stannis&#39;</span><span class="p">,</span><span class="s1">&#39;Renly&#39;</span><span class="p">,</span><span class="s1">&#39;Balon&#39;</span><span class="o">]</span><span class="nf">.map</span> <span class="k">do</span> <span class="o">|</span><span class="nb">name</span><span class="o">|</span>
  <span class="s2">&quot;King </span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="k">end</span>
<span class="c1"># =&gt; [&#39;King Joffrey&#39;, &#39;King Robb&#39;, &#39;King Stannis&#39;, &#39;King Renly&#39;, &#39;King Balon&#39;]</span>
</pre>
<p>#map builds a new array based on the block results.</p>
</div><div id="reduce" class="step" data-x="-1280" data-z="1280" data-rotate-y="-225"><h3>Enumerable#reduce (or #inject)</h3>
<pre class="highlight ruby"><span class="o">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="o">]</span><span class="nf">.reduce</span> <span class="p">{</span> <span class="o">|</span><span class="n">sum</span><span class="p">,</span> <span class="n">num</span><span class="o">|</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">num</span> <span class="p">}</span>
<span class="c1"># =&gt; 12</span>

<span class="o">[</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39;o&#39;</span><span class="p">,</span><span class="s1">&#39;w&#39;</span><span class="p">,</span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="s1">&#39;h&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;u&#39;</span><span class="p">,</span><span class="s1">&#39;s&#39;</span><span class="o">]</span><span class="nf">.reduce</span> <span class="k">do</span> <span class="o">|</span><span class="n">string</span><span class="p">,</span> <span class="n">letter</span><span class="o">|</span>
  <span class="n">letter</span> <span class="o">+</span> <span class="n">string</span>
<span class="k">end</span>
<span class="c1"># =&gt; &#39;such wow&#39;</span>
</pre>
<p>#reduce passes the result of each block as an argument to the next block.</p>
</div><div id="multiple_arguments" class="step" data-x="-1810" data-z="0" data-rotate-y="-270"><h3>Increased Block Arity is Sometimes Useful</h3>
<pre class="highlight ruby"><span class="p">{</span><span class="s2">&quot;@dhh&quot;</span> <span class="o">=&gt;</span> <span class="mi">108000</span><span class="p">,</span> <span class="s2">&quot;@avdi&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;11700&quot;</span><span class="p">}</span><span class="nf">.each</span> <span class="k">do</span> <span class="o">|</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">key</span><span class="si">}</span><span class="s2"> has </span><span class="si">#{</span><span class="n">value</span><span class="si">}</span><span class="s2"> followers.&quot;</span>
<span class="k">end</span>
<span class="c1"># =&gt; @dhh has 10800 followers</span>
<span class="c1"># =&gt; @avdi has 11700 followers</span>

<span class="o">[[</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">8</span><span class="p">,</span><span class="mi">8</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">11</span><span class="p">,</span><span class="mi">5</span><span class="o">]</span><span class="p">,</span><span class="o">[</span><span class="mi">6</span><span class="p">,</span><span class="mi">10</span><span class="o">]]</span><span class="nf">.select</span> <span class="k">do</span> <span class="o">|</span><span class="n">wins</span><span class="p">,</span> <span class="n">losses</span><span class="o">|</span>
  <span class="n">wins</span><span class="nf">.to_f</span> <span class="sr">/ (wins + losses) &gt; 0.5
end
# =&gt; [[12,4],[11,5]]
</span></pre>
</div><div id="unary" class="step" data-x="-1280" data-z="-1280" data-rotate-y="-315"><h3>Use a Unary Block for Brevity</h3>
<pre class="highlight ruby"><span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="nf">.any?</span> <span class="p">{</span> <span class="o">|</span><span class="n">num</span><span class="o">|</span> <span class="n">num</span><span class="nf">.odd?</span> <span class="p">}</span>      <span class="c1"># =&gt; true</span>
<span class="o">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">]</span><span class="nf">.any?</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:odd?</span><span class="p">)</span>                 <span class="c1"># =&gt; true</span>

<span class="o">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="o">]</span><span class="nf">.none?</span> <span class="p">{</span> <span class="o">|</span><span class="n">s</span><span class="o">|</span> <span class="n">s</span><span class="nf">.empty?</span> <span class="p">}</span> <span class="c1"># =&gt; true</span>
<span class="o">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="o">]</span><span class="nf">.none?</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:empty?</span><span class="p">)</span>        <span class="c1"># =&gt; true</span>
</pre>
</div><div id="mixin" class="step" data-y="1500"><img src="../../images/mix_in-d18cdba0.jpg" />
</div><div id="house_1" class="step" data-y="1500" data-z="-1810" data-rotate-x="90"><h3>Enumerable relies on #each</h3>
<pre class="highlight ruby"><span class="k">class </span><span class="nc">House</span>
  <span class="kp">include</span> <span class="no">Enumerable</span>
  <span class="k">def </span><span class="nf">bannermen</span>
    <span class="o">[</span><span class="s1">&#39;Rickard Karstark&#39;</span><span class="p">,</span> <span class="s1">&#39;Greatjon Umber&#39;</span><span class="p">,</span> <span class="s1">&#39;Howland Reed&#39;</span><span class="o">]</span>
  <span class="k">end</span>

  <span class="k">def </span><span class="nf">each</span>
    <span class="n">bannermen</span><span class="nf">.each</span> <span class="p">{</span> <span class="o">|</span><span class="n">bannerman</span><span class="o">|</span> <span class="k">yield</span> <span class="n">bannerman</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">stark</span> <span class="o">=</span> <span class="no">House</span><span class="nf">.new</span>
<span class="n">stark</span><span class="nf">.member?</span> <span class="s2">&quot;Greatjon Umber&quot;</span> <span class="c1"># =&gt; true</span>
<span class="n">stark</span><span class="nf">.first</span>                    <span class="c1"># =&gt; &#39;Rickard Karstark&#39;</span>
<span class="n">stark</span><span class="nf">.count</span>                    <span class="c1"># =&gt; 3</span>
</pre>
</div><div id="bannerman_1" class="step" data-y="1500" data-x="1280" data-z="-1280" data-rotate-x="90" data-rotate-z="45"><h3>Make Bannerman more Interesting</h3>
<pre class="highlight ruby"><span class="k">class </span><span class="nc">Bannerman</span> <span class="o">&lt;</span> <span class="no">Liner</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:health</span><span class="p">)</span>
  <span class="k">def </span><span class="nf">name</span>
    <span class="vi">@name</span> <span class="o">||=</span> <span class="no">Faker</span><span class="o">::</span><span class="no">Name</span><span class="nf">.name</span>
  <span class="k">end</span>

  <span class="k">def </span><span class="nf">health</span>
    <span class="vi">@health</span> <span class="o">||=</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="no">Bannerman</span><span class="nf">.new</span> <span class="c1"># =&gt; #&lt;Bannerman name=&quot;Gregor Clegane&quot;, health=100&gt;</span>
</pre>
</div><div id="house_2" class="step" data-y="1500" data-x="1810" data-rotate-x="90" data-rotate-z="90"><h3>Extend the Metaphor</h3>
<pre class="highlight ruby"><span class="k">class </span><span class="nc">House</span> <span class="o">&lt;</span> <span class="no">Liner</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:bannermen</span><span class="p">)</span>
  <span class="k">def </span><span class="nf">name</span>
    <span class="vi">@name</span> <span class="o">||=</span> <span class="no">Faker</span><span class="o">::</span><span class="no">Name</span><span class="nf">.name</span>
  <span class="k">end</span>

  <span class="k">def </span><span class="nf">bannermen</span>
    <span class="vi">@bannermen</span> <span class="o">||=</span> <span class="nb">Array</span><span class="nf">.new</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="p">{</span> <span class="no">Bannerman</span><span class="nf">.new</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">lannister</span> <span class="o">=</span> <span class="no">House</span><span class="nf">.new</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;Lannister&#39;</span><span class="p">)</span>

<span class="n">lannister</span><span class="nf">.reduce</span> <span class="p">{</span> <span class="o">|</span><span class="n">sum</span><span class="p">,</span> <span class="n">bannerman</span><span class="o">|</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">bannerman</span><span class="nf">.health</span> <span class="p">}</span>
<span class="c1"># =&gt; 300</span>

<span class="n">lannister</span><span class="nf">.any?</span> <span class="p">{</span> <span class="o">|</span><span class="n">bannerman</span><span class="o">|</span> <span class="n">bannerman</span><span class="nf">.name</span> <span class="o">==</span> <span class="s1">&#39;Tywin Lannister&#39;</span> <span class="p">}</span>
<span class="c1"># =&gt; true</span>
</pre>
</div><div id="spaceship" class="step" data-y="1500" data-x="1280" data-z="1280" data-rotate-x="90" data-rotate-z="135"><h3>Enumerable Also Relies on #<=> (spaceship)</h3>
<pre class="highlight ruby"><span class="n">lannister</span><span class="nf">.max</span> <span class="c1">#=&gt; #&lt;Bannerman name=Tyrion Lannister, health=20&gt;</span>

<span class="o">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">2</span><span class="o">]</span><span class="nf">.sort</span>              <span class="c1"># =&gt; [2,3,7]</span>
<span class="o">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;m&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">,</span><span class="s1">&#39;z&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="o">]</span><span class="nf">.max</span> <span class="c1"># =&gt; &#39;z&#39;</span>

<span class="mi">1</span>     <span class="o">&lt;=&gt;</span> <span class="mi">2</span>               <span class="c1"># =&gt; -1</span>
<span class="s1">&#39;bar&#39;</span> <span class="o">&lt;=&gt;</span> <span class="s1">&#39;foo&#39;</span>           <span class="c1"># =&gt; 1</span>
<span class="s1">&#39;x&#39;</span>   <span class="o">&lt;=&gt;</span> <span class="s1">&#39;x&#39;</span>             <span class="c1"># =&gt; 0</span>

</pre>
</div><div id="bannerman_2" class="step" data-y="1500" data-z="1810" data-rotate-x="90" data-rotate-z="180"><h3>Add #<=> to Bannerman for Better Sorting</h3>
<pre class="highlight ruby"><span class="k">class </span><span class="nc">Bannerman</span> <span class="o">&lt;</span> <span class="no">Liner</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:health</span><span class="p">)</span>
  <span class="k">def </span><span class="nf">&lt;=&gt;</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
    <span class="nb">self</span><span class="nf">.health</span> <span class="o">&lt;=&gt;</span> <span class="n">other</span><span class="nf">.health</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="n">lannister</span><span class="nf">.max</span> <span class="c1"># =&gt; #&lt;Bannerman name=&quot;Jaime Lannister&quot; health=95&gt;</span>
<span class="n">lannister</span><span class="nf">.min</span> <span class="c1"># =&gt; #&lt;Bannerman name=&quot;Tyrion Lannister&quot; health=20&gt;</span>
</pre>
</div><div id="bannerman_3" class="step" data-y="1500" data-x="-1280" data-z="1280" data-rotate-x="90" data-rotate-z="225"><h3>Comparable Also Relies on #<=> (spaceship)</h3>
<pre class="highlight ruby"><span class="k">class </span><span class="nc">Bannerman</span> <span class="o">&lt;</span> <span class="no">Liner</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:health</span><span class="p">)</span>
  <span class="kp">include</span> <span class="no">Comparable</span>
<span class="k">end</span>

<span class="n">davos</span> <span class="o">=</span> <span class="no">Bannerman</span><span class="nf">.new</span><span class="p">(</span><span class="s1">&#39;Davos Seaworth&#39;</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span>
<span class="n">brienne</span> <span class="o">=</span> <span class="no">Bannerman</span><span class="nf">.new</span><span class="p">(</span><span class="s1">&#39;Brienne of Tarth&#39;</span><span class="p">,</span> <span class="mi">85</span><span class="p">)</span>
<span class="n">jaime</span> <span class="o">=</span> <span class="no">Bannerman</span><span class="nf">.new</span><span class="p">(</span><span class="s1">&#39;Jaime Lannister&#39;</span><span class="p">,</span> <span class="mi">95</span><span class="p">)</span>

<span class="n">jaime</span> <span class="o">&lt;</span> <span class="n">brienne</span>                <span class="c1"># =&gt; false</span>
<span class="n">brienne</span> <span class="o">&gt;=</span> <span class="n">davos</span>               <span class="c1"># =&gt; true</span>
<span class="n">davos</span> <span class="o">==</span> <span class="n">jaime</span>                 <span class="c1"># =&gt; false</span>
<span class="n">davos</span><span class="nf">.between</span><span class="p">(</span><span class="n">brienne</span><span class="p">,</span> <span class="n">jaime</span><span class="p">)</span>  <span class="c1"># =&gt; true</span>
</pre>
</div><div id="enumerable_spaceship" class="step" data-y="1500" data-x="-1810" data-rotate-x="90" data-rotate-z="270"><h3>Now Houses are Correctly Sorted</h3>
<pre class="highlight ruby"><span class="n">tyrell</span> <span class="o">=</span> <span class="no">House</span><span class="nf">.new</span><span class="p">(</span><span class="s1">&#39;Tyrell&#39;</span><span class="p">)</span>

<span class="n">tyrell</span><span class="nf">.sort</span> <span class="c1"># =&gt; [#&lt;Bannerman name=&quot;Loras Tyrell&quot;, health=95&gt;, #&lt;Bannerman name=&quot;Horas Redwyne&quot;, health=75&gt;,...]</span>
<span class="n">tyrell</span><span class="nf">.max</span> <span class="c1"># =&gt; #&lt;Bannerman name=&quot;Loras Tyrell&quot;, health=90, strength=40&gt;</span>
<span class="n">tyrell</span><span class="nf">.min</span> <span class="c1"># =&gt; #&lt;Bannerman name=&quot;Willas Tyrell&quot;, health=50&gt;</span>
</pre>
</div><div id="getting_crazy" class="step" data-y="1500" data-x="-1280" data-z="-1280" data-rotate-x="90" data-rotate-z="315"><h3>Getting Crazy</h3>
<pre class="highlight ruby"><span class="k">class </span><span class="nc">Fight</span> <span class="o">&lt;</span> <span class="no">Liner</span><span class="nf">.new</span><span class="p">(</span><span class="ss">:bannermen</span><span class="p">)</span>
  <span class="kp">include</span> <span class="no">Enumerable</span>

  <span class="k">def </span><span class="nf">attack</span>
    <span class="n">defender</span> <span class="o">=</span> <span class="n">living</span><span class="nf">.sample</span>
    <span class="n">defender</span><span class="nf">.health</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="n">defender</span>
  <span class="k">end</span>

  <span class="k">def </span><span class="nf">living</span>
    <span class="n">bannermen</span><span class="nf">.select</span><span class="p">{</span> <span class="o">|</span><span class="n">bannerman</span><span class="o">|</span> <span class="n">bannerman</span><span class="nf">.health</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="k">def </span><span class="nf">each</span>
    <span class="k">yield</span> <span class="n">attack</span> <span class="k">until</span> <span class="n">living</span><span class="nf">.count</span> <span class="o">&lt;=</span> <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>
</pre>
<p>Enumerable doesn't require you to have a collection.</p>
</div><div id="too_far" class="step" data-y="3000" data-rotate-z="360"><h3>Taking this Metaphor Way Too Far</h3>
<img src="../../images/too_far-aa600ce1.jpg" />
<a href='//github.com/joshwlewis/game_of_enums'>github.com/joshwlewis/game_of_enums</a>
</div><div id="resources" class="step" data-y="4500" data-rotate-x="-90"><h3>Resources</h3>
<div class='well'>
<dl>
<dt>Enumerable</dt>
<dd>
<a href='http://www.ruby-doc.org/core-2.1.1/Enumerable.html'>ruby-doc.org/core-2.1.1/Enumerable.html</a>
</dd>
<dt>Comparable</dt>
<dd>
<a href='http://www.ruby-doc.org/core-2.1.1/Comparable.html'>ruby-doc.org/core-2.1.1/Comparable.html</a>
</dd>
<dt>Game of Enums</dt>
<dd>
<a href='//github.com/joshwlewis/game_of_enums'>github.com/joshwlewis/game_of_enums</a>
</dd>
<dt>This Presentation</dt>
<dd>
<a href='//joshwlewis.com/slides/enumerable_comparable'>joshwlewis.com/slides/enumerable_comparable</a>
</dd>
</dl>
</div>
</div>
</div>
<script src="../../javascripts/slides/body-dd9f322b.js" type="text/javascript"></script>
</body>
</html>
